{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\PhugitalTech\\\\frontend\\\\src\\\\Context\\\\EmployeeProvider.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useState, useCallback, useMemo } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function useEmployeeContext() {\n  _s();\n  return useContext(EmployeeContext);\n}\n_s(useEmployeeContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function EmployeeProvider({\n  children\n}) {\n  _s2();\n  const [employees, setEmployees] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const load = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await svc.fetchEmployees();\n      setEmployees(data);\n    } catch (err) {\n      setError(err.message || 'Fetch error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    load();\n  }, [load]);\n  const create = useCallback(async payload => {\n    // prepare\n    const id = uuidv4();\n    const snapshot = employees.slice();\n    const code = generateEmployeeCodeFromList(snapshot);\n    const doc = {\n      id,\n      ...payload,\n      code,\n      deleted: false,\n      statusHistory: payload.statusHistory || []\n    };\n    // optimistic update\n    setEmployees(prev => [...prev, doc]);\n    try {\n      const res = await svc.createEmployee(doc);\n      return res;\n    } catch (err) {\n      setEmployees(snapshot);\n      throw err;\n    }\n  }, [employees]);\n  const update = useCallback(async (id, patch) => {\n    const snapshot = employees.slice();\n    setEmployees(prev => prev.map(e => e.id === id ? {\n      ...e,\n      ...patch\n    } : e));\n    try {\n      const res = await svc.updateEmployee(id, patch);\n      return res;\n    } catch (err) {\n      setEmployees(snapshot);\n      throw err;\n    }\n  }, [employees]);\n  const softDelete = useCallback(async id => {\n    const snapshot = employees.slice();\n    setEmployees(prev => prev.map(e => e.id === id ? {\n      ...e,\n      deleted: true,\n      deletedAt: new Date().toISOString()\n    } : e));\n    try {\n      await svc.softDeleteEmployee(id);\n      return true;\n    } catch (err) {\n      setEmployees(snapshot);\n      throw err;\n    }\n  }, [employees]);\n  const memoized = useMemo(() => ({\n    employees,\n    loading,\n    error,\n    load,\n    create,\n    update,\n    softDelete\n  }), [employees, loading, error, load, create, update, softDelete]);\n  return /*#__PURE__*/_jsxDEV(EmployeeContext.Provider, {\n    value: memoized,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 8\n  }, this);\n}\n_s2(EmployeeProvider, \"EzoWRqfP7XNtir2SWeyzcYFQiKc=\");\n_c = EmployeeProvider;\nvar _c;\n$RefreshReg$(_c, \"EmployeeProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","useCallback","useMemo","jsxDEV","_jsxDEV","useEmployeeContext","_s","EmployeeContext","EmployeeProvider","children","_s2","employees","setEmployees","loading","setLoading","error","setError","load","data","svc","fetchEmployees","err","message","create","payload","id","uuidv4","snapshot","slice","code","generateEmployeeCodeFromList","doc","deleted","statusHistory","prev","res","createEmployee","update","patch","map","e","updateEmployee","softDelete","deletedAt","Date","toISOString","softDeleteEmployee","memoized","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/OneDrive/Desktop/PhugitalTech/frontend/src/Context/EmployeeProvider.jsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState, useCallback, useMemo } from 'react';\r\nexport function useEmployeeContext(){ return useContext(EmployeeContext); }\r\n\r\n\r\nexport function EmployeeProvider({ children }){\r\nconst [employees, setEmployees] = useState([]);\r\nconst [loading, setLoading] = useState(false);\r\nconst [error, setError] = useState(null);\r\n\r\n\r\nconst load = useCallback(async ()=>{\r\nsetLoading(true); setError(null);\r\ntry{\r\nconst data = await svc.fetchEmployees();\r\nsetEmployees(data);\r\n}catch(err){\r\nsetError(err.message || 'Fetch error');\r\n}finally{ setLoading(false); }\r\n},[]);\r\n\r\n\r\nuseEffect(()=>{ load(); },[load]);\r\n\r\n\r\nconst create = useCallback(async (payload)=>{\r\n// prepare\r\nconst id = uuidv4();\r\nconst snapshot = employees.slice();\r\nconst code = generateEmployeeCodeFromList(snapshot);\r\nconst doc = { id, ...payload, code, deleted: false, statusHistory: payload.statusHistory||[] };\r\n// optimistic update\r\nsetEmployees(prev => [ ...prev, doc ]);\r\ntry{\r\nconst res = await svc.createEmployee(doc);\r\nreturn res;\r\n}catch(err){\r\nsetEmployees(snapshot);\r\nthrow err;\r\n}\r\n},[employees]);\r\n\r\n\r\nconst update = useCallback(async (id, patch) =>{\r\nconst snapshot = employees.slice();\r\nsetEmployees(prev => prev.map(e => e.id===id ? { ...e, ...patch } : e));\r\ntry{\r\nconst res = await svc.updateEmployee(id, patch);\r\nreturn res;\r\n}catch(err){\r\nsetEmployees(snapshot);\r\nthrow err;\r\n}\r\n},[employees]);\r\n\r\n\r\nconst softDelete = useCallback(async (id) =>{\r\nconst snapshot = employees.slice();\r\nsetEmployees(prev => prev.map(e => e.id===id ? { ...e, deleted: true, deletedAt: new Date().toISOString() } : e));\r\ntry{\r\nawait svc.softDeleteEmployee(id);\r\nreturn true;\r\n}catch(err){\r\nsetEmployees(snapshot);\r\nthrow err;\r\n}\r\n},[employees]);\r\n\r\n\r\nconst memoized = useMemo(()=>({ employees, loading, error, load, create, update, softDelete }),[employees,loading,error,load,create,update,softDelete]);\r\n\r\n\r\nreturn <EmployeeContext.Provider value={memoized}>{children}</EmployeeContext.Provider>;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}