{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo, useState } from 'react';\nimport { useEmployeeContext } from '../context/EmployeeContext';\nimport { computeTenure } from '../utils/helper';\nexport default function useEmployees({\n  q = '',\n  filters = {},\n  sort = null,\n  page = 1,\n  perPage = 5\n}) {\n  _s();\n  const {\n    employees\n  } = useEmployeeContext();\n  const list = useMemo(() => employees.filter(e => !e.deleted), [employees]);\n\n  // searching\n  const searched = useMemo(() => {\n    const re = new RegExp(q, 'i');\n    return list.filter(e => re.test(e.name) || re.test(e.email) || re.test(e.position));\n  }, [list, q]);\n\n  // apply filters (status, position, salary range)\n  const filtered = useMemo(() => {\n    return searched.filter(e => {\n      if (filters.status && e.status !== filters.status) return false;\n      if (filters.position && e.position !== filters.position) return false;\n      if (filters.salaryRange) {\n        const s = Number(e.salary || 0);\n        if (filters.salaryRange === '<50' && s >= 50000) return false;\n        if (filters.salaryRange === '50-100' && (s < 50000 || s > 100000)) return false;\n        if (filters.salaryRange === '>100' && s <= 100000) return false;\n      }\n      return true;\n    });\n  }, [searched, filters]);\n\n  // sorting\n  const sorted = useMemo(() => {\n    if (!sort) return filtered;\n    const [k, d] = sort.split(':');\n    return [...filtered].sort((a, b) => {\n      const va = a[k];\n      const vb = b[k];\n      if (va == null) return d === 'asc' ? -1 : 1;\n      if (vb == null) return d === 'asc' ? 1 : -1;\n      if (typeof va === 'string') return d === 'asc' ? va.localeCompare(vb) : vb.localeCompare(va);\n      return d === 'asc' ? va - vb : vb - va;\n    });\n  }, [filtered, sort]);\n\n  // pagination\n  const total = sorted.length;\n  const totalPages = Math.max(1, Math.ceil(total / perPage));\n  const currentPage = Math.min(totalPages, Math.max(1, page));\n  const items = sorted.slice((currentPage - 1) * perPage, currentPage * perPage).map(e => ({\n    ...e,\n    tenure: computeTenure(e.dateJoined)\n  }));\n  return {\n    items,\n    total,\n    totalPages,\n    currentPage\n  };\n}\n_s(useEmployees, \"oRzPNv2kCjye4eOo0uX8LGZxBBk=\", false, function () {\n  return [useEmployeeContext];\n});","map":{"version":3,"names":["useMemo","useState","useEmployeeContext","computeTenure","useEmployees","q","filters","sort","page","perPage","_s","employees","list","filter","e","deleted","searched","re","RegExp","test","name","email","position","filtered","status","salaryRange","s","Number","salary","sorted","k","d","split","a","b","va","vb","localeCompare","total","length","totalPages","Math","max","ceil","currentPage","min","items","slice","map","tenure","dateJoined"],"sources":["C:/Users/ASUS/OneDrive/Desktop/PhugitalTech/frontend/src/Hooks/useEmployees.jsx"],"sourcesContent":["import { useMemo, useState } from 'react';\r\nimport { useEmployeeContext } from '../context/EmployeeContext';\r\nimport { computeTenure } from '../utils/helper';\r\n\r\n\r\nexport default function useEmployees({ q='', filters = {}, sort = null, page = 1, perPage = 5 }){\r\nconst { employees } = useEmployeeContext();\r\nconst list = useMemo(()=> employees.filter(e => !e.deleted),[employees]);\r\n\r\n\r\n// searching\r\nconst searched = useMemo(()=>{\r\nconst re = new RegExp(q, 'i');\r\nreturn list.filter(e => re.test(e.name) || re.test(e.email) || re.test(e.position));\r\n},[list,q]);\r\n\r\n\r\n// apply filters (status, position, salary range)\r\nconst filtered = useMemo(()=>{\r\nreturn searched.filter(e => {\r\nif (filters.status && e.status !== filters.status) return false;\r\nif (filters.position && e.position !== filters.position) return false;\r\nif (filters.salaryRange){\r\nconst s = Number(e.salary||0);\r\nif (filters.salaryRange === '<50' && s >= 50000) return false;\r\nif (filters.salaryRange === '50-100' && (s < 50000 || s > 100000)) return false;\r\nif (filters.salaryRange === '>100' && s <= 100000) return false;\r\n}\r\nreturn true;\r\n});\r\n},[searched,filters]);\r\n\r\n\r\n// sorting\r\nconst sorted = useMemo(()=>{\r\nif (!sort) return filtered;\r\nconst [k, d] = sort.split(':');\r\nreturn [...filtered].sort((a,b)=>{\r\nconst va = a[k]; const vb = b[k];\r\nif (va == null) return d==='asc' ? -1 : 1;\r\nif (vb == null) return d==='asc' ? 1 : -1;\r\nif (typeof va === 'string') return d==='asc' ? va.localeCompare(vb) : vb.localeCompare(va);\r\nreturn d==='asc' ? va - vb : vb - va;\r\n});\r\n},[filtered,sort]);\r\n\r\n\r\n// pagination\r\nconst total = sorted.length;\r\nconst totalPages = Math.max(1, Math.ceil(total / perPage));\r\nconst currentPage = Math.min(totalPages, Math.max(1, page));\r\nconst items = sorted.slice((currentPage-1)*perPage, currentPage*perPage).map(e=>({ ...e, tenure: computeTenure(e.dateJoined) }));\r\n\r\n\r\nreturn { items, total, totalPages, currentPage };\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}